<template>
  <button class="logout-button" @click="handleClick">
    <svg class="logout-button__svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      xmlns="http://www.w3.org/2000/svg" v-html="icons[props.icon]" />
    <span class="logout-button__user">{{ `${props.firstName} ${props.lastName}` }}</span>
  </button>
</template>

<script setup>
import { useQuasar } from 'quasar';
import { useRouter } from 'vue-router';
const $q = useQuasar();
const props = defineProps({
  firstName: {
    type: String,
    required: false,
  },
  lastName: {
    type: String,
    required: false,
  },
  icon: {
    type: String,
    required: true
  }
})

const icons = {
  student: '<path d="M17 13.5C17 13.1022 16.842 12.7206 16.5607 12.4393C16.2794 12.158 15.8978 12 15.5 12H8.5C8.10218 12 7.72064 12.158 7.43934 12.4393C7.15804 12.7206 7 13.1022 7 13.5V14C7 15.971 8.86 18 12 18C15.14 18 17 15.971 17 14V13.5ZM14.75 8.25C14.75 7.52065 14.4603 6.82118 13.9445 6.30546C13.4288 5.78973 12.7293 5.5 12 5.5C11.2707 5.5 10.5712 5.78973 10.0555 6.30546C9.53973 6.82118 9.25 7.52065 9.25 8.25C9.25 8.97935 9.53973 9.67882 10.0555 10.1945C10.5712 10.7103 11.2707 11 12 11C12.7293 11 13.4288 10.7103 13.9445 10.1945C14.4603 9.67882 14.75 8.97935 14.75 8.25ZM22 12C22 17.523 17.523 22 12 22C6.477 22 2 17.523 2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12ZM20.5 12C20.5 9.74566 19.6045 7.58365 18.0104 5.98959C16.4163 4.39553 14.2543 3.5 12 3.5C9.74566 3.5 7.58365 4.39553 5.98959 5.98959C4.39553 7.58365 3.5 9.74566 3.5 12C3.5 14.2543 4.39553 16.4163 5.98959 18.0104C7.58365 19.6045 9.74566 20.5 12 20.5C14.2543 20.5 16.4163 19.6045 18.0104 18.0104C19.6045 16.4163 20.5 14.2543 20.5 12Z" fill="#F2F2FD"/>',
  signout: '<path d="M10.2001 13.5C10.4388 13.5 10.6677 13.4052 10.8365 13.2364C11.0053 13.0676 11.1001 12.8387 11.1001 12.6C11.1001 12.3613 11.0053 12.1324 10.8365 11.9636C10.6677 11.7948 10.4388 11.7 10.2001 11.7C9.9614 11.7 9.73248 11.7948 9.5637 11.9636C9.39492 12.1324 9.3001 12.3613 9.3001 12.6C9.3001 12.8387 9.39492 13.0676 9.5637 13.2364C9.73248 13.4052 9.9614 13.5 10.2001 13.5ZM13.2001 4.19999C13.2001 4.11351 13.1813 4.02805 13.1452 3.94948C13.1091 3.87091 13.0564 3.80108 12.9907 3.74478C12.9251 3.68848 12.848 3.64703 12.7649 3.62328C12.6817 3.59953 12.5944 3.59405 12.5089 3.60719L4.1089 4.89119C3.96728 4.91297 3.83813 4.98471 3.7448 5.09344C3.65148 5.20217 3.60015 5.34071 3.6001 5.48399V18.516C3.60015 18.6593 3.65148 18.7978 3.7448 18.9065C3.83813 19.0153 3.96728 19.087 4.1089 19.1088L12.5089 20.394C12.5944 20.4071 12.6817 20.4016 12.7649 20.3779C12.848 20.3542 12.9251 20.3127 12.9907 20.2564C13.0564 20.2001 13.1091 20.1303 13.1452 20.0517C13.1813 19.9731 13.2001 19.8877 13.2001 19.8012V12H19.4065L18.2101 13.0488C18.0975 13.1554 18.0305 13.3014 18.0232 13.4563C18.016 13.6112 18.0689 13.7629 18.171 13.8796C18.2731 13.9963 18.4165 14.069 18.571 14.0823C18.7254 14.0956 18.8791 14.0487 18.9997 13.9512L21.3949 11.8512C21.4591 11.7949 21.5106 11.7255 21.5459 11.6477C21.5812 11.5699 21.5994 11.4854 21.5994 11.4C21.5994 11.3146 21.5812 11.2301 21.5459 11.1523C21.5106 11.0745 21.4591 11.0051 21.3949 10.9488L18.9997 8.84879C18.88 8.74408 18.7237 8.6912 18.565 8.70178C18.4064 8.71236 18.2584 8.78553 18.1537 8.90519C18.049 9.02486 17.9961 9.18122 18.0067 9.33987C18.0173 9.49853 18.0904 9.64648 18.2101 9.75119L19.4065 10.8H13.2001V4.19999ZM12.0001 4.89839V19.104L4.8001 18V5.99879L12.0001 4.89839ZM15.0001 19.2H14.4001V13.2H15.6001V18.6C15.6001 18.7591 15.5369 18.9117 15.4244 19.0243C15.3118 19.1368 15.1592 19.2 15.0001 19.2ZM14.4001 9.59999V4.79999H15.0001C15.1592 4.79999 15.3118 4.86321 15.4244 4.97573C15.5369 5.08825 15.6001 5.24086 15.6001 5.39999V9.59999H14.4001Z" fill="#F2F2FD"/>'
}

const router = useRouter();
const handleClick = () => {
  $q.dialog({
    title: 'Sign out',
    message: 'Would you like to sign out?',
    cancel: true,
    persistent: true
  }).onOk(() => {
    router.push('/login')
  }).onOk(() => {
    // console.log('>>>> second OK catcher')
  }).onCancel(() => {
    // console.log('>>>> Cancel')
  }).onDismiss(() => {
    // console.log('I am triggered on both OK and Cancel')
  })
}

</script>

<style scoped lang="scss">
.logout-button {
  display: flex;
  align-items: center;
  gap: .8rem;
  height: 2.4rem; // don't know what causes the button to be too tall so hard-coded it
  cursor: pointer;

  &:hover {
    color: $accent;

    &:deep(path) {
      fill: $accent;
    }
  }


  & :deep(path) {
    fill: $primary-1;
    transition: 200ms fill ease;
  }

  &__user {
    font-size: 1.4rem;
    font-weight: 300;
    transition: 400ms color ease;
  }
}
</style>
